








 curl -i -X PATCH "https://api.authtool.app/v4/group/user/keys/244522/reset"   -H "Accept: application/json"   -H "Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50Ijp7ImlkIjo3NDkyLCJzZXNzaW9uIjoiJDJhJDA4JGVJNmN6amZzeDVjV1psOEhwdGpnUk9MSUZLSlZhZTg1U0x3ODYxR0VGdHNiM2JGQzBWTldLIn0sImlhdCI6MTc1NzkzMjcxNSwiZXhwIjoxNzU3OTMzMDE1LCJ0eXBlIjoiYWNjZXNzIiwidG9rZW4iOiIyMGM0Yzg3Mi05ZDQ4LTRlNzQtOTY0ZC1lNTIwYzFkNDE5MWYifQ.LD6jYv3sfV6ApFSDh9aBos-gEMTzbi8EFe4IOWNu5P4"








curl -X POST "https://api.authtool.app/v4/auth/refresh-tokens" \
  -H "Accept: application/json" \
  -H "Content-Type: application/json" \
  -d '{
    "refreshToken": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50Ijp7ImlkIjo3NDkyLCJzZXNzaW9uIjoiJDJhJDA4JGVJNmN6amZzeDVjV1psOEhwdGpnUk9MSUZLSlZhZTg1U0x3ODYxR0VGdHNiM2JGQzBWTldLIn0sImlhdCI6MTc1NzkyNzU4NCwiZXhwIjoxNzYwNTE5NTg0LCJ0eXBlIjoicmVmcmVzaCIsInRva2VuIjoiOGJjYjc5MTItN2M3OC00ODU1LWEzMTYtYTJjMTRjNjVhNTIzIn0.1YooDp3fZYZX9G5_1QQ_viWF7mELIXhJG7XuTJOZ2UU"
  }'



search
https://api.authtool.app/v4/group/10/user/keys?limit=10&page=1&hasPackage=true&q=IOSSTAR-week-iIS7TrTIPFDlP6cw
{
    "data": [
        {
            "id": 246585,
            "createdAt": "2025-09-17T17:52:20.378Z",
            "key": {
                "id": 2060327,
                "value": "IOSSTAR-week-iIS7TrTIPFDlP6cw",
                "createdAt": "2025-09-17T17:52:20.000Z",
                "expiryDate": null,
                "expirationTimeType": "week",
                "expirationTimeValue": 1,
                "type": "normal",
                "status": 1,
                "activationCount": 0,
                "resetCount": 0,
                "activationLimit": 1,
                "source": "group",
                "isCleanable": false,
                "package": null,
                "packages": [
                    {
                        "id": 2128,
                        "name": "IOSSTAR"
                    },
                    {
                        "id": 2318,
                        "name": "WINSTAR"
                    },
                    {
                        "id": 2456,
                        "name": "MLBB"
                    },
                    {
                        "id": 2480,
                        "name": "IOSSTAR JB"
                    },
                    {
                        "id": 2879,
                        "name": "IOSSTAR"
                    }
                ]
            }
        }
    ],
    "meta": {
        "currentPage": 1,
        "limit": 10,
        "totalItems": 1,
        "totalPages": 1
    }
}




Request URL
https://api.authtool.app/v4/group/order-product/7
Request Method
POST
Status Code
200 OK
Remote Address
104.21.16.1:443
Referrer Policy
strict-origin-when-cross-origin
access-control-allow-origin
*
access-control-expose-headers
token
alt-svc
h3=":443"; ma=86400
cf-cache-status
DYNAMIC
cf-ray
97f7a2105a2c897e-DEL
content-encoding
zstd
content-security-policy
default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests
content-type
application/json; charset=utf-8
cross-origin-embedder-policy
require-corp
cross-origin-opener-policy
same-origin
cross-origin-resource-policy
same-origin
date
Mon, 15 Sep 2025 11:02:40 GMT
etag
W/"49-i6D4a6gz23RM05i7OzArSXz+WKs"
nel
{"success_fraction":0,"report_to":"cf-nel","max_age":604800}
origin-agent-cluster
?1
referrer-policy
no-referrer
report-to
{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=rdvW8ZxdydssnT9nqroCKm0c9WEH2ZJEbU7kTUd%2B1rAnN1y0GQ%2F2IFVfDfdLQqnoFstuEld5QSFi%2F8AX6PlsGk4R4G995p73A7ye53mRHGT0MrQKS2wF%2BCNzjHpuwrceWcqO"}],"group":"cf-nel","max_age":604800}
server
cloudflare
server-timing
cfL4;desc="?proto=TCP&rtt=68289&min_rtt=3835&rtt_var=26228&sent=180&recv=120&lost=0&retrans=1&sent_bytes=57662&recv_bytes=13262&delivery_rate=1545274&cwnd=274&unsent_bytes=0&cid=a4cb9c8de1ed590f&ts=143640&x=0"
strict-transport-security
max-age=15552000; includeSubDomains
strict-transport-security
max-age=31536000
x-content-type-options
nosniff
x-dns-prefetch-control
off
x-download-options
noopen
x-frame-options
SAMEORIGIN
x-permitted-cross-domain-policies
none
x-xss-protection
0
:authority
api.authtool.app
:method
POST
:path
/v4/group/order-product/7
:scheme
https
accept
application/json
accept-encoding
gzip, deflate, br, zstd
accept-language
en-US,en;q=0.9,hi;q=0.8
authorization
Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50Ijp7ImlkIjo3NDkyLCJzZXNzaW9uIjoiJDJhJDA4JGVJNmN6amZzeDVjV1psOEhwdGpnUk9MSUZLSlZhZTg1U0x3ODYxR0VGdHNiM2JGQzBWTldLIn0sImlhdCI6MTc1NzkzNDAyMiwiZXhwIjoxNzU3OTM0MzIyLCJ0eXBlIjoiYWNjZXNzIiwidG9rZW4iOiI1NmVhOWY2Yy1kZDU5LTRjMzQtOWRhYS1kYjIxYjY2OWUyOGYifQ.YJ37n17C9fGqnVQQ_BaDl-Q3hbbS5VboPbOzq5aSOTY
content-length
14
content-type
application/json
origin
https://authtool.app
priority
u=1, i
referer
https://authtool.app/
sec-fetch-dest
empty
sec-fetch-mode
cors
sec-fetch-site
same-site
user-agent
Mozilla/5.0 (iPhone; CPU iPhone OS 18_5 like Mac OS X) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/18.5 Mobile/15E148 Safari/604.1

    


Request URL
https://api.authtool.app/v4/group/10/user/products
Request Method
GET
Status Code
304 Not Modified
Remote Address
104.21.16.1:443
Referrer Policy
strict-origin-when-cross-origin
access-control-allow-origin
*
access-control-expose-headers
token
alt-svc
h3=":443"; ma=86400
cf-cache-status
DYNAMIC
cf-ray
97f7a2157bda897e-DEL
content-security-policy
default-src 'self';base-uri 'self';font-src 'self' https: data:;form-action 'self';frame-ancestors 'self';img-src 'self' data:;object-src 'none';script-src 'self';script-src-attr 'none';style-src 'self' https: 'unsafe-inline';upgrade-insecure-requests
cross-origin-embedder-policy
require-corp
cross-origin-opener-policy
same-origin
cross-origin-resource-policy
same-origin
date
Mon, 15 Sep 2025 11:02:40 GMT
etag
W/"888-I9TUvLK4njSfHXnNxThnto1qOEw"
nel
{"success_fraction":0,"report_to":"cf-nel","max_age":604800}
origin-agent-cluster
?1
referrer-policy
no-referrer
report-to
{"endpoints":[{"url":"https:\/\/a.nel.cloudflare.com\/report\/v4?s=eWf7KV%2B%2BcMC9FRFJpWZZV4enIOOucp3RaWzquDCPH2TBY5RCtWUmsPAQHJFVgrY%2FhutS%2BnDiwJ8rPS3TkuzBOINm7UKmCgxCfdJlv6JuHhnhFRTK9MOygLM%2BTY7p9f3kbw15"}],"group":"cf-nel","max_age":604800}
server
cloudflare
server-timing
cfL4;desc="?proto=TCP&rtt=61255&min_rtt=3835&rtt_var=24139&sent=186&recv=124&lost=0&retrans=1&sent_bytes=58776&recv_bytes=13449&delivery_rate=1545274&cwnd=274&unsent_bytes=0&cid=a4cb9c8de1ed590f&ts=144025&x=0"
strict-transport-security
max-age=15552000; includeSubDomains
strict-transport-security
max-age=31536000
x-content-type-options
nosniff
x-dns-prefetch-control
off
x-download-options
noopen
x-frame-options
SAMEORIGIN
x-permitted-cross-domain-policies
none
x-xss-protection
0
:authority
api.authtool.app
:method
GET
:path
/v4/group/10/user/products
:scheme
https
accept
application/json
accept-encoding
gzip, deflate, br, zstd
accept-language
en-US,en;q=0.9,hi;q=0.8
authorization
Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJhY2NvdW50Ijp7ImlkIjo3NDkyLCJzZXNzaW9uIjoiJDJhJDA4JGVJNmN6amZzeDVjV1psOEhwdGpnUk9MSUZLSlZhZTg1U0x3ODYxR0VGdHNiM2JGQzBWTldLIn0sImlhdCI6MTc1NzkzNDAyMiwiZXhwIjoxNzU3OTM0MzIyLCJ0eXBlIjoiYWNjZXNzIiwidG9rZW4iOiI1NmVhOWY2Yy1kZDU5LTRjMzQtOWRhYS1kYjIxYjY2OWUyOGYifQ.YJ37n17C9fGqnVQQ_BaDl-Q3hbbS5VboPbOzq5aSOTY
if-none-match
W/"888-I9TUvLK4njSfHXnNxThnto1qOEw"
origin
https://authtool.app
priority
u=1, i
referer
https://authtool.app/
sec-fetch-dest
empty
sec-fetch-mode
cors
sec-fetch-site
same-site





-- Create user_referrals table
CREATE TABLE user_referrals (
    id CHAR(36) PRIMARY KEY,
    referrer_id CHAR(36) NOT NULL,
    referred_id CHAR(36) NOT NULL UNIQUE,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (referrer_id) REFERENCES admin(id) ON DELETE CASCADE,
    FOREIGN KEY (referred_id) REFERENCES admin(id) ON DELETE CASCADE
);

-- Create user_bonus_earnings table
CREATE TABLE user_bonus_earnings (
    id CHAR(36) PRIMARY KEY,
    user_id CHAR(36) NOT NULL,
    referral_id CHAR(36) NOT NULL,
    provider_plan_id CHAR(36) NOT NULL,
    key_id CHAR(36) NOT NULL,
    key_price DECIMAL(10, 2) NOT NULL,
    bonus_percentage DECIMAL(5, 2) NOT NULL,
    bonus_amount DECIMAL(10, 2) NOT NULL,
    is_claimed BOOLEAN DEFAULT FALSE,
    claimed_at DATETIME NULL,
    created_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    FOREIGN KEY (user_id) REFERENCES admin(id) ON DELETE CASCADE,
    FOREIGN KEY (referral_id) REFERENCES admin(id) ON DELETE CASCADE,
    FOREIGN KEY (provider_plan_id) REFERENCES provider_plans(id) ON DELETE CASCADE,
    FOREIGN KEY (key_id) REFERENCES provider_keys(id) ON DELETE CASCADE
);

-- Create bonus_claims table
CREATE TABLE bonus_claims (
    id CHAR(36) PRIMARY KEY,
    user_id CHAR(36) NOT NULL,
    total_bonus DECIMAL(10, 2) NOT NULL,
    claimed_amount DECIMAL(10, 2) NOT NULL,
    status ENUM('pending', 'approved', 'rejected') DEFAULT 'pending',
    claimed_at DATETIME DEFAULT CURRENT_TIMESTAMP,
    processed_at DATETIME NULL,
    processed_by CHAR(36) NULL,
    FOREIGN KEY (user_id) REFERENCES admin(id) ON DELETE CASCADE,
    FOREIGN KEY (processed_by) REFERENCES admin(id) ON DELETE SET NULL
);

-- Add bonus tracking columns to users table if they don't exist
ALTER TABLE admin 
ADD COLUMN IF NOT EXISTS total_bonus_earned DECIMAL(10, 2) DEFAULT 0,
ADD COLUMN IF NOT EXISTS total_bonus_claimed DECIMAL(10, 2) DEFAULT 0,
ADD COLUMN IF NOT EXISTS referral_code VARCHAR(20) UNIQUE,
ADD COLUMN IF NOT EXISTS referred_by CHAR(36) NULL;

-- Update existing users with referral codes if not set
UPDATE admin SET referral_code = CONCAT('REF', LPAD(HEX(id), 8, '0')) WHERE referral_code IS NULL;